---
title: 'O2SS0099：不支持在 ORDER BY 子句中使用 ROWNUM (错误) '
description: 介绍 SQL Server 迁移助手 (SSMA) for Oracle 无法在 ORDER BY 子句中转换包含 Oracle ROWNUM 的语句的一些原因。
author: nahk-ivanov
ms.prod: sql
ms.technology: ssma
ms.devlang: sql
ms.topic: reference
ms.date: 1/22/2020
ms.author: alexiva
ms.openlocfilehash: caeab6a193363979c1f84dc3c03ccd3b4a1fbcf7
ms.sourcegitcommit: 33f0f190f962059826e002be165a2bef4f9e350c
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 01/30/2021
ms.locfileid: "99181785"
---
# <a name="o2ss0099-rownum-in-order-by-clause-is-not-supported-error"></a>O2SS0099：不支持在 ORDER BY 子句中使用 ROWNUM (错误) 

本文介绍了 SQL Server 迁移助手 (SSMA) Oracle 无法转换包含 Oracle in 子句的语句的一些原因 `ROWNUM` `ORDER BY` 。

## <a name="background"></a>背景

Oracle `ROWNUM` 伪列返回一个数字，用于指示从表中选择行的顺序。 选定的第一行具有 `ROWNUM` 的 `1` ; 第二行的为 `ROWNUM` `2` ，依此类推。

转换 `ROWNUM` in 子句时 `ORDER BY` ，SSMA `ROW_NUMBER()` 在大多数情况下都使用模拟技术，而不会发生错误。 但是，如果 `ORDER BY` 子句作为查询的一部分使用，则 `UNION` SSMA 将生成错误消息。

## <a name="example"></a>示例

请看下面的示例：

```sql
SELECT city
FROM customers

UNION

SELECT city
FROM employees
ORDER BY ROWNUM;
```

当你尝试在 SSMA 中转换上面的代码时，它将生成以下错误消息：

> O2SS0099：不支持在 ORDER BY 子句中使用 ROWNUM

## <a name="possible-remedies"></a>可能的补救措施

解决方案是通过使用括号创建子查询来简化表达式。 创建子查询会将 `ROWNUM` in `ORDER BY` 子句与子句隔开， `UNION` 使其成为一个更简单的表达式。 下面是简化查询的示例：

```sql
SELECT
    city
FROM
    (SELECT city FROM customers
     UNION
     SELECT city FROM employees)
ORDER BY
    ROWNUM;
```

## <a name="related-conversion-messages"></a>相关转换消息

* [O2SS0021： ROWNUM 未转换的语句](o2ss0021.md)
* O2SS0039： ROWNUM 伪列无法转换
* O2SS0081： SELECT 语句中不支持星号和 ROWNUM
* O2SS0412：无法转换具有分组集的 ROWNUM

在大多数情况下，请考虑查询要尝试完成的操作，并将其重写为使用 `ROW_NUMBER()` 模拟、 `TOP` 子句或对 `WHERE` 、 `GROUP BY` 或子句使用唯一表达式 `ORDER BY` 。
